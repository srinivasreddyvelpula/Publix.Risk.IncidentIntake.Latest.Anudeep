@model Publix.Risk.IncidentIntake.UI.Models.PropertyDamageViewModel


<style>
    .modelyear {
        padding-left: 20px !important;
    }

    .field-validation-error {
        color: red;
    }
</style>
@using (Html.BeginForm())
{

<div style="margin-top:20px">
    <h4 style="text-align:center">Incident Intake- PropertyDamage </h4>
    <br />
    <div class="alert alert-warning" role="alert">
        <strong style="color:burlywood;font-family:Arial;align-content:center">This report is prepared in anticipation of litigation and is privileged and confidential information. Do not share with the customer or anyone outside of publix without authorization from Risk Management.</strong>
    </div>
    <br />

    <h4>Primary Customer Invloved </h4>
    <hr />
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Name</label>
        </div>
        <div class="col-3">
            @Html.TextBoxFor(t => t.PrimaryCustomerName, new { @class = "form-control" })
            @Html.ValidationMessageFor(t => t.PrimaryCustomerName, "", new { @class = "txt-danger" })
        </div>
        <div class="col-3">
            <button type="button" class="btn btn-primary" id="btnPrimaryAdd" style="background-color:darkgray" data-toggle="modal" data-target="#CartDamageModal">Add</button>
            <button type="button" class="btn btn-primary" style="background-color:darkgray" data-toggle="modal" data-target="#CartDamageModal">Edit</button>
            <button type="button" class="btn btn-primary" style="background-color:darkgray" data-toggle="modal" data-target="#CartDamageModal">Delete</button>
        </div>
    </div>
    <hr />
    <br />
    <h4>Person Completing Form</h4>
    <hr />
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>PERNR</label>
        </div>
        <div class="col-2">
            @Html.TextBoxFor(t => t.EmpPernr, new { @class = "form-control", placehoder = "PERNR" })
            @Html.ValidationMessageFor(t => t.EmpPernr, "", new { @class = "txt-danger" })
        </div>
        <div class="col-1">
            <button id="search-button" type="button" class="btn btn-primary" style="background-color:darkgray" data-toggle="modal" data-target="#associateSearchModal">
                <i class="fas fa-search"></i>
            </button>
        </div>
        <div class="col-form-label col-2">
            <label>Name</label>
        </div>
        <div class="col-3">
            <input id="txtEmpFirstLastName" type="text" class="form-control" placeholder="Name" disabled="disabled">
        </div>
    </div>
    <hr />
    <br />


    <h4>Manager Incident Reported To</h4>
    <hr />
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>PERNR</label>
        </div>
        <div class="col-2">
            @Html.TextBoxFor(t => t.MgrPernr, new { @class = "form-control", placehoder = "PERNR" })
            @Html.ValidationMessageFor(t => t.MgrPernr, "", new { @class = "txt-danger" })
        </div>
        <div class="col-1">
            <button id="search-button" type="button" class="btn btn-primary" style="background-color:darkgray" data-toggle="modal" data-target="#associateSearchModal">
                <i class="fas fa-search"></i>
            </button>
        </div>
        <div class="col-form-label col-2">
            <label>Name</label>
        </div>
        <div class="col-3">
            <input id="MgrFirstNameLastName" type="text" class="form-control" placeholder="Manager First Last Name" disabled="disabled">
        </div>
    </div>
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Date Reported</label>
        </div>
        <div class="col-3">
            @Html.TextBoxFor(t => t.DateReported, "MM-dd-yyyy", new { @class = "form-control", type = "date" })
            @Html.ValidationMessageFor(t => t.DateReported, "", new { @class = "txt-danger" })

        </div>
        <div class="col-form-label col-2">
            <label>Time Reported</label>
        </div>
        <div class="col-3">
            @Html.TextBoxFor(t => t.TimeReported, new { @class = "form-control", type = "time" })
            @Html.ValidationMessageFor(t => t.TimeReported, "", new { @class = "txt-danger" })
        </div>
    </div>
    <hr />
    <br />
    <h4>Property Damage Information</h4>
    <hr />


    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Date of Incident</label>
        </div>
        <div class="col-3">
            @Html.TextBoxFor(t => t.DateIncident, "MM-dd-yyyy", new { @class = "form-control", type = "date" })
            @Html.ValidationMessageFor(t => t.DateIncident, "", new { @class = "txt-danger" })
        </div>
        <div class="col-form-label col-2">
            <label>Time of Incident</label>
        </div>
        <div class="col-3">
            @Html.TextBoxFor(t => t.TimeIncident, new { @class = "form-control", type = "time" })
            @Html.ValidationMessageFor(t => t.TimeIncident, "", new { @class = "txt-danger" })
        </div>
    </div>
    <br />

    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Incident at Publix Location?</label>
        </div>
        <div class="col-3">
            @Html.DropDownListFor(t => t.IncidentAtLocation, Model.YesNoList, "--Select--", new { @class = "form-control" })
            @Html.ValidationMessageFor(t => t.IncidentAtLocation, "", new { @class = "txt-danger" })
        </div>

    </div>

    <div class="form-row" id="divCostCenter">
        <div class="col-form-label col-2">
            <label>Cost Center #</label>
        </div>
        <div class="col-3">
            @Html.TextBoxFor(t => t.CostCenter, new { @class = "form-control" })
            @Html.ValidationMessageFor(t => t.CostCenter, "", new { @class = "txt-danger" })
        </div>
        <div class="col-1">
            <button id="search-button" type="button" class="btn btn-primary" data-toggle="modal" data-target="#costCenterSearchModal">
                <i class="fas fa-search"></i>
            </button>
        </div>
        <div class="col-4">
            <span>Use 1 + the 4-Digit Store # for Stores</span>
        </div>
    </div>
    <div id="locationDiv" style="display:none">
        <div class="form-row locationdiv">
            <div class="col-form-label col-2">
                <label>Location Name</label>
            </div>
            <div class="col-3">
                @Html.TextBoxFor(t => t.LocationName, new { @class = "form-control" })

            </div>
        </div>
        <br />
        <div class="form-row locationdiv">
            <div class="col-form-label col-2">
                <label>Address 1</label>
            </div>
            <div class="col-3">
                @Html.TextBoxFor(t => t.Address1, new { @class = "form-control" })

            </div>
        </div>
        <br />

        <div class="form-row locationdiv">
            <div class="col-form-label col-2">
                <label>Address 2</label>
            </div>
            <div class="col-3">
                @Html.TextBoxFor(t => t.Address2, new { @class = "form-control" })

            </div>
        </div>
        <br />
        <div class="form-row ">
            <div class="col-form-label col-1">
                <label>City</label>
            </div>
            <div class="col-3">
                @Html.TextBoxFor(t => t.City, new { @class = "form-control" })

            </div>
            <div class="col-form-label col-1">
                <label>State</label>
            </div>
            <div class="col-3">
                @Html.DropDownListFor(t => t.State, Model.State, "-Select--", new { @class = "form-control" })

            </div>
            <div class="col-form-label col-1">
                <label>Zip</label>
            </div>
            <div class="col-3">
                @Html.TextBoxFor(t => t.Zip, new { @class = "form-control" })

            </div>
        </div>
        <br />
    </div>
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Customer's Description Of Incident</label>
        </div>
        <div class="col-4">

            @Html.TextAreaFor(t => t.CustomerDescription, 3, 5, new { @class = "form-control" })
            @Html.ValidationMessageFor(t => t.CustomerDescription, "", new { @class = "txt-danger" })
        </div>
        <div class="col-form-label col-2">
            <label>(Note: 500 char limit.)</label>
        </div>
    </div>

    <br />
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Manager's Description Of Incident</label>
        </div>
        <div class="col-4">
            @Html.TextAreaFor(t => t.ManagerDescription, 3, 5, new { @class = "form-control" })
            @Html.ValidationMessageFor(t => t.ManagerDescription, "", new { @class = "txt-danger" })
        </div>
        <div class="col-form-label col-2">
            <label>(Note: 500 char limit.)</label>
        </div>
    </div>
    <br />
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Any reason why publix should not pay this claim?</label>
        </div>
        <div class="col-2">
            @*<select name="location"  class="form-control">
                    <option value="">--SELECT--</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>*@
            @Html.DropDownListFor(t => t.Reason, Model.YesNoList, "--Select--", new { @class = "form-control", onchange = "reasonChange(this)" })
        </div>
    </div>
    <div class="form-row" id="divreasonexplanation" style="display:none">
        <div class="col-form-label col-2">
            <label>Explain why Publix should not pay</label>
        </div>
        <div class="col-4">
            @*<select name="location"  class="form-control">
                    <option value="">--SELECT--</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>*@
            @Html.TextAreaFor(t => t.ReasonExplanation, 3, 5, new { @class = "form-control" })
        </div>
    </div>

    <br />
    <hr />
    <br />
    <h4>Damage Information</h4>
    <hr />
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Property Damaged</label>
        </div>
        <div class="col-3">
            @Html.TextBoxFor(t => t.PropertyDamage, new { @class = "form-control", placeholder = "Property Damage" })
        </div>
    </div>
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Alleged Cause</label>
        </div>
        <div class="col-3">
            @Html.TextBoxFor(t => t.AllegedCause, new { @class = "form-control", placeholder = "Alleged Cause" })

        </div>


    </div>
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Approxy Value of Damaged Items(s)</label>
        </div>
        <div class="col-3">
            @Html.TextBoxFor(t => t.ApproxValue, new { @class = "form-control", placeholder = "ApproxValue" })
        </div>
    </div>
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Associate Involved</label>
        </div>
        <div class="col-3">
            @Html.DropDownListFor(t => t.AssociateInvolved, Model.YesNoList, "--Select--", new { @class = "form-control", id = "associateInvolved" })

        </div>

        <div class="col-form-label col-1 divassociate">
            <label>PERNR</label>
        </div>
        <div class="col-2 divassociate">
            @Html.TextBoxFor(t => t.AssociateEmpPernr, new { @class = "form-control", placehoder = "PERNR" })
            @Html.ValidationMessageFor(t => t.AssociateEmpPernr, "", new { @class = "txt-danger" })
        </div>
        <div class="col-1 divassociate">
            <button id="search-button" type="button" class="btn btn-primary" style="background-color:darkgray" data-toggle="modal" data-target="#associateSearchModal">
                <i class="fas fa-search"></i>
            </button>
        </div>
        <div class="col-form-label col-1 divassociate">
            <label>Name</label>
        </div>
        <div class="col-2 divassociate">
            <input id="txtEmpFirstLastName" type="text" class="form-control" placeholder="Name" disabled="disabled">
        </div>
    </div>
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Vendor Involved</label>
        </div>
        <div class="col-3">
            @Html.DropDownListFor(t => t.VendorInvolved, Model.YesNoList, "--Select--", new { @class = "form-control" })
        </div>
    </div>

    <hr />
    <br />
    <h4>Witness</h4>
    <hr />
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Associate Witness(es)</label>
        </div>
        <div class="col-4">
            @Html.TextAreaFor(t => t.EmployeeWitness, 3, 5, new { @class = "form-control" })
        </div>
        <div class="col-3">
            <button type="button" class="btn btn-primary" style="background-color:darkgray" data-target="#associateSearchModal" data-toggle="modal">Add</button>
            <button type="button" class="btn btn-primary" style="background-color:darkgray">Delete</button>
        </div>
    </div>
    <br />
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Non-Associate's Witness(es)</label>
        </div>
        <div class="col-4">

            @Html.TextAreaFor(t => t.NonEmployeeWitness, 3, 5, new { @class = "form-control" })
        </div>
        <div class="col-3">
            <button type="button" class="btn btn-primary" style="background-color:darkgray" data-target="#CartDamageModal" id="btnnonassociatewitnessAdd" data-toggle="modal">Add</button>
            <button type="button" class="btn btn-primary" style="background-color:darkgray">Edit</button>
            <button type="button" class="btn btn-primary" style="background-color:darkgray">Delete</button>
        </div>
    </div>
    <hr />
    <br />
    <h4>Evidence</h4>
    <hr />
    <div class="form-row">
        <div class="col-form-label col-22">
            <label><strong>Reminder:</strong>Please follow standards outlined in the Cutsomer Service and Store Operation Section of the retail MRL regarding video</label>
        </div>
    </div>
    <br />
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Incident area covered by Video?</label>
        </div>
        <div class="col-2">

            @Html.DropDownListFor(t => t.IncidentCoveredByVideo, Model.YesNoUnknownList, "--Select--", new { @class = "form-control", onchange = "incidentCoveredByVideoChange(this)" })
        </div>
    </div>
    <div class="form-row" style="display:none" id="divcamera">
        <div class="col-form-label col-2">
            <label>#Camera</label>
        </div>
        <div class="col-2">
            
            @Html.TextBoxFor(t => t.Camera, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-row">
        <div class="col-form-label col-2">
            <label>Photographs Taken?</label>
        </div>
        <div class="col-2">
            @Html.DropDownListFor(t => t.PhotoGrpahsTaken, Model.YesNoList, "--Select--", new { @class = "form-control" })

        </div>
    </div>
    <hr />
    <br />
    <div class="form-row" style="justify-content:center">
        <div class="col-1">
            <input type="submit" value="Submit" class="btn btn-primary btn-success" />
        </div>
        <div class="col-1">
            <input type="submit" value="Cancel" class="btn btn-secondary btn-info" style="background-color:darkgray">
        </div>
    </div>
    @{
        //await Html.RenderPartialAsync("Dialogs/_CartDamagePIPartial", Model.CartDamageModel);
        await Html.RenderPartialAsync("Dialogs/_AssociateSearchPartial");
    }

    <!--cost center search Modal Popup-->
    <div class="modal fade" id="costCenterSearchModal" tabindex="-1" role="dialog" aria-labelledby="costcenterSearchModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header text-center" style="background-color:green;">
                    <h5 class="modal-title text-center" id="costcenterSearchModalTitle"><strong style="color:white;">Location Search</strong></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <div class="row">
                            <div class="col-form-label col-12">
                                <label>Search By any combination of the following:</label>
                            </div>

                        </div>

                        <br />
                        <div class="row">
                            <div class="col-form-label col-2">
                                <label>Location Description</label>
                            </div>
                            <div class="col-4">
                                <input type="text" class="form-control" placeholder="First Name">
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-form-label col-2">
                                <label>City</label>
                            </div>
                            <div class="col-4">
                                <input type="text" class="form-control" placeholder="Last Name">
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-form-label col-2">
                                <label>State</label>
                            </div>
                            <div class="col-4">
                                @Html.DropDownListFor(t => t.SelectedState, Model.State, "--Select--", new { @class = "form-control" })
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-12">
                                <span><strong><br />Use '*' in the First Name and Last Name fields for wildcard search.</strong></span>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-12 text-center">
                                <button type="button" class="btn btn-primary btn-lg" style="background-color:green;">Search</button>
                            </div>
                        </div>
                        <br />
                        <br />
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--cost center search Modal Popup-->
</div>

}
<script src="~/js/propertydamage.js"></script>
<script src="~/js/DamageCommon.js"></script>
<script>
    
    $(document).ready(function () {
        $(".otherdiv").hide(); $(".divassociate").hide(); $("#divCostCenter").hide()});
   
    
    
</script>